import { DndProvider } from "react-dnd";
import { HTML5Backend } from "react-dnd-html5-backend";
import GameWriter from "../../components/GameWriter";
import Desk from "../../img/desk.jpeg";
import HelpDesk from "../../img/help_desk.jpeg";
import PC from "../../img/pc.jpeg";
import USB from "../../img/usb.png";
import Office from "../../img/office.jpeg";
import Container from "../../dnd/Container";
import { ItemTypes } from "../../dnd/ItemTypes";
import { useState } from "react";
import GameHint from "../../components/GameHint";

export default function FirstLevelDnd( props ) {

  const handleSwitchToHacked = () => {
    props.handleScenario("hacked");
  };

  const handleSwitchToDesk = () => {
    props.handleScenario("desk");
  };

  const handleSwitchToHelpDesk = () => {
    props.handleScenario("h_desk");
  };

  const [ idOption, setIdOption ] = useState([ null ]);

  const [boxes, setBoxes] = useState([
    {
      name: "USB",
      type: ItemTypes.USB,
      img: USB,
      width: 100,
      heigth: 50,
    },
  ]);

  const [dustbins, setDustbins] = useState([
    {
      accepts: ItemTypes.USB,
      lastDroppedItem: null,
      img: Desk,
      width: 80,
      heigth: 50,
      idOption: "Desk",
    },
    {
      accepts: ItemTypes.USB,
      lastDroppedItem: null,
      img: HelpDesk,
      width: 80,
      heigth: 50,
      idOption: "HelpDesk",
    },
    {
      accepts: ItemTypes.USB,
      lastDroppedItem: null,
      img: PC,
      width: 80,
      heigth: 50,
      idOption: "PC",
    },
  ]);

  const handleIdOption = (idOption) => {
    setIdOption(idOption);
    if (idOption === "PC") {
      props.wrong();
      handleSwitchToHacked();
    }
    if (idOption === "Desk") {
      props.wrong();
      handleSwitchToDesk();
    }
    if(idOption === "HelpDesk") {
      props.right();
      props.updateScore(1);
      handleSwitchToHelpDesk();
    }
  }

  return (
    <div className="FirstLevelDnd">
      <div className="mb-3">
        <GameWriter
          text={
            "Now that the USB pen drive is collected, do you have to decide what to do with it? Do you think it's okay to take it to the Help Desk where they can manage it, or leave it on a desk so that someone else can see it and decide what to do with it, or put it on your PC so you can see it? Drag and drop the USB pen drive in the right choice."
          }
        />
      </div>

      <div>
        <img
          src={Office}
          alt="img"
          width={900}
          height={430}
          style={{ display: "block" }}
        />
        <div style={{ position: "absolute", bottom: 110, width: "100%" }}>
          <GameHint
            tag={"Hint"}
            text={
              "Sensitive data that is not our responsibility is often found in USB pens. So trying to handle these situations yourself is not the best solution to take. But the curiosity of the human being often does not make the right decision as demonstrated by some studies done at the Black Hat. Where Elie Burztein presented the results of a small social experiment conducted by her team. 297 USB sticks were distributed on the University of Illinois campus. The thumb drives contained a harmless script that simply alerted researchers if someone plugged the device into a computer, providing time and location information. The results were clear: 45% of the USB sticks had been plugged into a computer and many within the first 10 hours of being found. Surprisingly, 68% of people who had collected the USB sticks and connected them to their PC said they had done so solely to find the real owner of the stick."
            }
          ></GameHint>
          <DndProvider backend={HTML5Backend}>
            <Container
              boxesParam={boxes}
              dustbinsParam={dustbins}
              callBack={handleIdOption}
            />
          </DndProvider>
        </div>
      </div>
    </div>
  );
}
