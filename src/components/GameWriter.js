import React, { useState } from "react";
import Typewriter from "typewriter-effect";
import GameButtonNext from "./GameButtonNext";
import GameButtonSkip from "./GameButtonSkip";

export default function WriterGame(props) {
  const [skipped, setSkipped] = useState(false);
  const [skippedNext, setSkippedNext] = useState(false);

  const handleCallBack = () => {
    setSkippedNext(true);
    if (props.callBack) {
      props.callBack();
    }
  };

  const handleSkip = () => {
    if(!skipped) {
      setSkipped( true );
      handleCallBack();
    }
  }

  return (
    <React.Fragment>
      <div>
        {!skippedNext && <GameButtonSkip callBack={handleSkip} />}
        {skippedNext && props.textButton && (
          <GameButtonNext
            textButton={props.textButton}
            callBackNext={props.callBackNext}
          />
        )}
      </div>
      <div
        style={{
          fontSize: "20px",
          fontWeight: "600",
          color: "black",
        }}
      >
        {!skipped && (
          <Typewriter
            onInit={(typewriter) => {
              typewriter
                .changeDelay(20)
                .typeString(props.text)
                .callFunction(() => handleCallBack())
                .start();
            }}
          />
        )}
        {skipped && <div dangerouslySetInnerHTML={{ __html: props.text }} />}
      </div>
    </React.Fragment>
  );
}
